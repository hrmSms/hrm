<!-- page specific plugin styles -->
<!-- <link rel="stylesheet" href="../../assets/css/jquery-ui.custom.css" /> -->

<!-- page specific plugin styles -->
<link rel="stylesheet" href="assets/css/jquery-ui.custom.min.css" />
<link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.min.css" />

<!-- /section:basics/navbar.layout -->
<div class="main-container" id="main-container">
  <div class="row">
  <div class="col-xs-12 page-header">
	<div class="pull-left">
		<div>
			<h1 class="blue">
				User story: <a ui-sref="task.list({ usId: userStory.id })">{{userStory.name}}</a>
			</h1>
		</div>
		<div class="padding-left-50px">
			<h4>Edit a task</h4>
		</div>
	</div>

</div>
<!-- PAGE CONTENT BEGINS -->
<form name="form">
	<div class="col-md-8 border-right">
		<div class="row">
			<div class="form-group col-md-4">
				<label class="control-label no-padding-right" for="t-state">Name</label> 
				<input type="text" class="form-control" id="t-task-name" required
					ng-model="task.name">
			</div>
			
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-state">State</label>
				<select class="form-control" id="t-state" ng-model="task.state">
					<option ng-repeat="taskState in taskStates" value={{taskState}}>{{taskState.name}}</option>
				</select>
			</div>
			
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-est">Estimation</label> 
				<input type="number" class="form-control" id="t-est" ng-model="task.taskEst" placeholder="hour(s)" value="">
			</div>
			
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-to-do">To Do </label> 
				<input type="number" class="form-control" id="t-to-do" ng-model="task.toDo" placeholder="hour(s)"  disabled="disabled">
			</div>
			
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-time-spent">Time spent</label> 
				<input type="number" class="form-control" id="t-time-spent" ng-model="task.spentTime" placeholder="hour(s)"  disabled="disabled">
			</div>
		</div>
		<div class="row">
			<div class="form-group">
				<label class="col-md-1 control-label no-padding-right" for="t-desc"> Description </label>
				<div class="col-md-12">
					<div class="wysiwyg-editor" id="desc" ng-model="task.description"></div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="form-group col-md-12">
				<label class="control-label no-padding-right" for="t-attachment">Attachment</label>
				<table id="t-attachment"
					class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Name</th>
							<th>Description</th>
							<th><i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>When</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Document.doc</td>
							<td>The first attachment</td>
							<td>9/8/2015</td>
						</tr>
						<tr>
							<td>Reporting.xls</td>
							<td>The excel file</td>
							<td>9/7/2015</td>
						</tr>
						<tr>
							<td>Analytic.pdf</td>
							<td>Another .pdf file</td>
							<td>9/10/2015</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row">
			<div class="form-group">
				<label class="col-md-1 control-label no-padding-right" for="note"> Note </label>
				<div class="col-md-12">
					<div class="wysiwyg-editor" id="note" ng-model="task.note"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="space-12"></div>
	<div class="col-md-4">
		<div class="form-group">
			<label class="control-label no-padding-right" for="t-owner">Owner</label>
			<select class="form-control" id="t-owner" ng-model="task.owner">
				<option ng-repeat="user in users" value={{user}}>{{user.username}}</option>				
			</select>
		</div>
		<div class="form-group">
			<label class="control-label no-padding-right" for="t-user-story">User story</label> 
			<input type="text" class="form-control" id="t-user-story" value="{{userStory.name}}" disabled="disabled">
		</div>
		<div class="form-group">
			<label class="control-label no-padding-right" for="t-project">Project</label>
			<input type="text" class="form-control" id="t-project" value="{{project.name}}" disabled="disabled">
		</div>
	</div>

	<div class="clearfix"></div>
	<div class="form-actions center clearfix">
	
		<button type="button" class="btn btn-success" ng-click="createAndClose()">
			<i class="ace-icon fa fa-save icon-on-right bigger-110"></i> Create
		</button>
		
		<button type="button" class="btn btn-warning" ng-click="reset(form)">
			<i class="ace-icon fa fa-undo bigger-110"></i> Reset
		</button>
		
		<button type="button" class="btn" ng-click="goToTaskList()">
			<i class="ace-icon fa fa-times bigger-110"></i> Close
		</button>
	</div>
</form>
<!-- PAGE CONTENT ENDS -->

<!-- page specific plugin scripts -->
<script type="text/javascript">
	var scripts = [ null, 'assets/js/bootstrap-wysiwyg.min.js', 'assets/js/bootbox.min.js', null ]; 
	$('.page-content-area').ace_ajax('loadScripts', scripts, function() {		
		initAll();
	});
</script>

<!-- page specific plugin scripts -->
<script type="text/javascript">
	var initAll = function() {		
		$('#note').css({	//note texterea
		      'height' : '150px'
	    }).ace_wysiwyg();

		var toolbar = $('#note').prev().get(0);
		$(toolbar).addClass('wysiwyg-style2'); 		
		
		$('#desc').css({	//	Description texterea
		      'height' : '150px'
	    }).ace_wysiwyg();

		var description = $('#desc').prev().get(0);
		$(description).addClass('wysiwyg-style2');
	};
</script>

