<!-- page specific plugin styles -->
<!-- <link rel="stylesheet" href="../../assets/css/jquery-ui.custom.css" /> -->

<!-- page's inner styles -->
<style>
.border-top {
	border-top: 1px solid #E3E3E3;
	border-top-color: rgba(0, 0, 0, 0.11);
}

.border-right {
	border-right: 1px solid #E3E3E3;
	border-right-color: rgba(0, 0, 0, 0.11);
}

.border-bottom {
	border-bottom: 1px solid #E3E3E3;
	border-bottom-color: rgba(0, 0, 0, 0.11);
}

.border-left {
	border-left: 1px solid #E3E3E3;
	border-left-color: rgba(0, 0, 0, 0.11);
}
</style>

<!-- ajax layout which only needs content area -->
<div class="page-header">
	<h1>Userstory Detail</h1>
</div>
<!-- /.page-header -->

<!-- PAGE CONTENT BEGINS -->
<form role="form">
	<div class="col-md-8 border-right">
		<div class="row">
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-schedulestate">Schedule
					sate</label> <select class="form-control" id="t-schedulestate"
					placeholder="">
					<option value="define">Define</option>
				</select>
			</div>
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-status">Status</label>
				<select class="form-control" id="t-status" placeholder="">
					<option value="new">New</option>
					<option value="closed">Closed</option>
					<option value="assigned">Assigned</option>
					<option value="block">Block</option>
					<option value="reopen">Re-Open</option>
				</select>
			</div>
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-planest">Plan
					EST</label> <input type="text" class="form-control" id="t-planest"
					placeholder="Estimation" value="{{echo}}">
			</div>
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-taskest">Task
					EST</label> <input type="time" class="form-control" id="t-taskest"
					placeholder="Estimation">
			</div>
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-todo">To
					Do</label> <input type="time" class="form-control" id="t-todo"
					placeholder="Estimation">
			</div>
			<div class="form-group col-md-2">
				<label class="control-label no-padding-right" for="t-actual">Actual</label>
				<input type="time" class="form-control" id="t-actual"
					placeholder="Estimation">
			</div>
		</div>
		<br />
		<div class="row">
			<div class="form-group">
				<label class="col-md-1 control-label no-padding-right" for="t-desc">
					Description </label>
				<div class="col-md-12">
					<div class="wysiwyg-editor" id="desc"></div>
				</div>
			</div>
		</div>
		<br />
		<div class="row">
			<div class="form-group col-md-12">
				<label class="control-label no-padding-right" for="t-schedule">Schedule</label>

			</div>
			<div class="form-group form-horizontal col-md-12">
				<label class="col-md-1 control-label no-padding-left"
					for="iteration"> Iteration </label>
				<div class="col-md-4">
					<select style="" class="form-control" id="state">
						<option value=""></option>
					</select>
				</div>
				<label class="col-md-3 control-label no-padding-right"
					for="planVelocity"> Plan Velocity </label>
				<div class="col-md-4">
					<input type="number" class="spinner-input form-control"
						id="spinner1" maxlength="3">
				</div>
			</div>
		</div>
		<br />
		<div class="row">
			<div class="form-group col-md-12">
				<label class="control-label no-padding-right" for="t-attachment">Attachment</label>
				<table id="t-attachment"
					class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Name</th>
							<th>Description</th>
							<th><i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
								When</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Document.doc</td>
							<td>The first attachment</td>
							<td>9/8/2015</td>
						</tr>
						<tr>
							<td>Reporting.xls</td>
							<td>The excel file</td>
							<td>9/7/2015</td>
						</tr>
						<tr>
							<td>Analytic.pdf</td>
							<td>Another .pdf file</td>
							<td>9/10/2015</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row">
			<div class="form-group">
				<label class="col-md-1 control-label no-padding-right" for="note">
					Note </label>
				<div class="col-md-12">
					<div class="wysiwyg-editor" id="note"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="form-group">
			<label class="control-label no-padding-right" for="t-assignee">Owner</label>
			<select class="form-control" id="t-assignee">
				<option value=""></option>
				<option value=""></option>
				<option value=""></option>
			</select>
		</div>
		<div class="form-group">
			<label class="control-label no-padding-right" for="t-project">Project</label>
			<select class="form-control" id="t-project">
				<option value=""></option>
				<option value=""></option>
				<option value=""></option>
			</select>
		</div>
	</div>
	<div class="clearfix"></div>
	<div class="form-actions center clearfix">
		<button type="button" class="btn btn-success">
			<i class="ace-icon fa fa-save icon-on-right bigger-110"></i> Save &
			close
		</button>
		<button type="button" class="btn btn-warning">
			<i class="ace-icon fa fa-save bigger-110"></i> Save & new
		</button>

		<button type="button" class="btn btn-purple" ng-click="save()">
			<i class="ace-icon fa fa-save bigger-110"></i> Save
		</button>
		<button type="button" class="btn" ng-click="redirect()">
			<i class="ace-icon fa fa-times bigger-110"></i> Close
		</button>
	</div>
</form>
<!-- inline scripts related to this page -->

<!-- page specific plugin scripts -->
<script type="text/javascript">
	var scripts = [null, 'assets/js/bootstrap-wysiwyg.min.js','assets/js/bootbox.min.js', null]; //[null, './assets/js/jquery-ui.custom.js', './assets/js/bootbox.js', null]
	$('.page-content-area').ace_ajax('loadScripts', scripts, function() {
	  //inline scripts related to this page
	  initNote();
	});
</script>
<script type="text/javascript">
	var initNote = function() {
		//note texterea
		$('#note').ace_wysiwyg();

		var toolbar = $('#note').prev().get(0);
		$(toolbar).addClass('wysiwyg-style2');
		$('#desc').ace_wysiwyg();

		var description = $('#desc').prev().get(0);
		$(description).addClass('wysiwyg-style2');
	};
	jQuery(function($) {

		//RESIZE IMAGE

		//Add Image Resize Functionality to Chrome and Safari
		//webkit browsers don't have image resize functionality when content is editable
		//so let's add something using jQuery UI resizable
		//another option would be opening a dialog for user to enter dimensions.
		if (typeof jQuery.ui !== 'undefined' && ace.vars['webkit']) {

			var lastResizableImg = null;
			function destroyResizable() {
				if (lastResizableImg == null)
					return;
				lastResizableImg.resizable("destroy");
				lastResizableImg.removeData('resizable');
				lastResizableImg = null;
			}

			var enableImageResize = function() {
				$('.wysiwyg-editor')
						.on(
								'mousedown',
								function(e) {
									var target = $(e.target);
									if (e.target instanceof HTMLImageElement) {
										if (!target.data('resizable')) {
											target.resizable({
												aspectRatio : e.target.width
														/ e.target.height,
											});
											target.data('resizable', true);

											if (lastResizableImg != null) {
												//disable previous resizable image
												lastResizableImg
														.resizable("destroy");
												lastResizableImg
														.removeData('resizable');
											}
											lastResizableImg = target;
										}
									}
								})
						.on(
								'click',
								function(e) {
									if (lastResizableImg != null
											&& !(e.target instanceof HTMLImageElement)) {
										destroyResizable();
									}
								}).on('keydown', function() {
							destroyResizable();
						});
			}

			enableImageResize();

			/**
			//or we can load the jQuery UI dynamically only if needed
			if (typeof jQuery.ui !== 'undefined') enableImageResize();
			else {//load jQuery UI if not loaded
				$.getScript($path_assets+"/js/jquery-ui.custom.min.js", function(data, textStatus, jqxhr) {
					enableImageResize()
				});
			}
			 */
		}

	});
</script>