<!-- page specific plugin styles -->
<!-- <link rel="stylesheet" href="../../assets/css/jquery-ui.custom.css" /> -->

<!-- page's inner styles -->
<style>
  .border-top {
    border-top: 1px solid #E3E3E3;
    border-top-color: rgba(0,0,0,0.11);
  }
  .border-right {
    border-right: 1px solid #E3E3E3;
    border-right-color: rgba(0,0,0,0.11);
  }
  .border-bottom {
    border-bottom: 1px solid #E3E3E3;
    border-bottom-color: rgba(0,0,0,0.11);
  }
  .border-left {
    border-left: 1px solid #E3E3E3;
    border-left-color: rgba(0,0,0,0.11);
  }
</style>

<!-- ajax layout which only needs content area -->
<div class="page-header">
  <h1>
    Project Details 
    <small> 
    	<i class="ace-icon fa fa-angle-double-right"></i> Create a project
    </small>
  </h1>
</div>
<!-- /.page-header -->

<!-- PAGE CONTENT BEGINS -->

	<!-- <form class="form-horizontal" role="form" ng-submit="addProject(newProject, description, startDate, endDate, clientId)"> -->
	<form class="form-horizontal" role="form" ng-submit="addProject(p)">
		<div class="col-xs-12">
		<div class="input-group">
			<label class="col-sm-2 control-label no-padding-right" for="name"
				required> Name </label>
			<div class="col-sm-10">
				<input type="text" id="name" placeholder="Enter project name..."
					class="col-xs-10 col-sm-8" ng-model="p.name" />
			</div>
			<hr/>
			
			<label class="col-sm-2 control-label no-padding-right" for="desc"
				required> Description </label>
			<div class="col-sm-10">
				<input type="text" id="description" 
					class="col-xs-10 col-sm-8" ng-model="p.description" />
			</div>			
			
			<label class="col-sm-2 control-label no-padding-right" for="client"
				required> Client </label>
			<div class="col-sm-10">
				<input type="text" id="client" 
					class="col-xs-10 col-sm-8" ng-model="p.clientId" />
			</div>
			<hr/>
				<label class="col-sm-2 control-label no-padding-right"
					for="startDate">Start Date</label>
				<div class="col-sm-3 col-xs-8">
					<div class="input-group">
						<input id="startDate" type="text" class="form-control"
							ng-model="p.startDate" /> <span class="input-group-addon">
							<i class="fa fa-clock-o bigger-110"></i>
						</span>
					</div>
				</div>
				<label class="col-sm-2 control-label no-padding-right"
					for="startDate">End Date</label>
				<div class="col-sm-3 col-xs-8">
					<div class="input-group">
						<input id="endDate" type="text" class="form-control"
							ng-model="p.endDate" /> <span class="input-group-addon">
							<i class="fa fa-clock-o bigger-110"></i>
						</span>
					</div>
				</div>
			</div>
					<spanclass="input-group-btn">
					<div class="hidden-sm hidden-xs btn-group">
						<button class="btn btn-xs btn-success" type="submit"
							ng-disabled="!p.name">
							<i class="ace-icon fa fa-check bigger-120"></i>
						</button>
					</div>
					</span>
				</div>
			</div>
	
	<hr />
	<div class="row">
		<div class="col-xs-12">
			<table id="sample-table-1"
				class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th class="center"><label class="position-relative">
								<input type="checkbox" class="ace" /> <span class="lbl"></span>
						</label></th>
						<th>Name</th>
						<th>Description</th>

						<th><i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
							Start Date</th>
						<th><i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
							End Date</th>
						<th class="hidden-480">Client</th>
						<th>Operations</th>
					</tr>
				</thead>
				<tbody>

					<tr ng-repeat="item in projects">
						<td class="center"><label class="position-relative">
								<input type="checkbox" class="ace" ng-model="item.checked"
								ng-change="updateProject(item)" /> <span class="lbl"></span>
						</label></td>

						<td><a ui-sref="sprint.list({ projectId: item.id})">{{item.name}}</a></td>
						<td>{{item.description}}</td>						
						<td>{{item.startDate| date:'shortDate'}}</td>
						<td>{{item.endDate | date:'shortDate'}}</td>						
						<td>{{item.clientId}}</td>
						<td>
							<div class="hidden-sm hidden-xs action-buttons"
								ng-click="deleteProject(item)">
								<a class="red" href="#"> <i
									class="ace-icon fa fa-trash-o bigger-130"></i>
								</a>
							</div>
						</td>

					</tr>
				</tbody>
			</table>
		</div>
	</div>

</form>

<!-- PAGE CONTENT ENDS -->

<!-- page specific plugin scripts -->
<script type="text/javascript">
			var initAll = function() {
				//datetimepicker plugin
				$('#startDate').datetimepicker().next().on(ace.click_event, function(){
					$(this).prev().focus();
					
				});
				
				$('#endDate').datetimepicker().next().on(ace.click_event, function(){
					$(this).prev().focus();
				});

				//description texterea
				$('#description').ace_wysiwyg();

				var toolbar = $('#description').prev().get(0);
				$(toolbar).addClass('wysiwyg-style2');

			

				//RESIZE IMAGE
				
				//Add Image Resize Functionality to Chrome and Safari
				//webkit browsers don't have image resize functionality when content is editable
				//so let's add something using jQuery UI resizable
				//another option would be opening a dialog for user to enter dimensions.
				if ( typeof jQuery.ui !== 'undefined' && ace.vars['webkit'] ) {
					
					var lastResizableImg = null;
					function destroyResizable() {
						if(lastResizableImg == null) return;
						lastResizableImg.resizable( "destroy" );
						lastResizableImg.removeData('resizable');
						lastResizableImg = null;
					}

					var enableImageResize = function() {
						$('.wysiwyg-editor')
						.on('mousedown', function(e) {
							var target = $(e.target);
							if( e.target instanceof HTMLImageElement ) {
								if( !target.data('resizable') ) {
									target.resizable({
										aspectRatio: e.target.width / e.target.height,
									});
									target.data('resizable', true);
									
									if( lastResizableImg != null ) {
										//disable previous resizable image
										lastResizableImg.resizable( "destroy" );
										lastResizableImg.removeData('resizable');
									}
									lastResizableImg = target;
								}
							}
						})
						.on('click', function(e) {
							if( lastResizableImg != null && !(e.target instanceof HTMLImageElement) ) {
								destroyResizable();
							}
						})
						.on('keydown', function() {
							destroyResizable();
						});
				    }

					enableImageResize();

					
				}
			
			};
		</script>

<script type="text/javascript">
	var scripts = [null, 
	               './assets/js/jquery.autosize.min.js', 
	               './assets/js/jquery.inputlimiter.1.3.1.min.js',
	               'assets/js/date-time/moment.min.js',
	               'assets/js/date-time/bootstrap-datetimepicker.min.js',
	               'assets/js/bootstrap-wysiwyg.min.js',
	               'assets/js/bootbox.min.js', 
	               null];
	$('.page-content-area').ace_ajax('loadScripts', scripts, function() {
	  //inline scripts related to this page
	  $('textarea[class*=autosize]').autosize({append: "\n"});
  	  $('textarea.limited').inputlimiter({
  		remText: '%n character%s remaining...',
  		limitText: 'max allowed : %n.'
  	  });
	  initAll();
	});

</script>
